---
title: "Let’s go physical(ly separated)"
date: Wed, 18 Feb 2026 09:44:18 GMT
lastUpdated: 2026-02-18T09:47:24.405Z
link: https://medium.com/@arbaudie.it/lets-go-physical-ly-separated-4053ae5be14c?source=rss-c779d007e7fe------2
---

<figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/0*Ox7hBbPR7lTe6cyq" /></figure><p>In my <a href="https://medium.com/@arbaudie.it/cave-adminem-7c97503f289c">previous article</a> , we discussed best practices for securing and monitoring admin access, such as role-based access controls (RBAC). It’s a good time to have a quick reminder about AAA aka “ Authentication, Authorization and Accounting” , which is a framework designed to manage access to networked resources and ensure secure, controlled interactions :</p><ol><li>Authentication : Verifies the identity of a user or system attempting to access a resource. This step involves credentials to confirm legitimacy before granting access.</li><li>Authorization : Determines what a user or system is allowed to do after authentication. It sets permissions, defining the actions or resources that can be accessed based on the user’s role, ensuring they only interact with the data or systems for which they have clearance.</li><li>Accounting : Tracks and logs user activities within a system, providing a record of what actions were taken, when, and by whom. This audit trail helps in monitoring, troubleshooting, and detecting unauthorized or malicious behavior.</li></ol><p>Altogether, AAA enhances security by ensuring that only authenticated users can access specific resources, with their actions monitored and recorded for accountability. And that’s exactly what we did with use of personal logins, role based access control and using the audit log to track admin activity.</p><p>We know that admins aren’t the only one being able to temper with or gaining unwanted access to datas : any user is a potential risk for our database. Obviously, the previous advices still applies but role based access can prove to be inefficient in case of fine grained access control.</p><p>Let’s imagine we are in a high security line of business and users should have very strict and tight access control. One way to prevent malicous users to circumvent the filtering si to physically isolate the user from the data. But can we dot it with MariaDB ?</p><p>First step, we create a user as mentionned in my previous article.</p><pre>CREATE USER 'IT-O'@'Coruscant' <br />IDENTIFIED via ed25519 REQUIRE SSL <br />WITH MAX_USER_CONNECTIONS 1 <br />PASSWORD EXPIRE INTERVAL xx DAYS;</pre><p>Second step, we create a dedicated schema using his user token.</p><p>Third step, we are gonna use to match the tables. We are now leveraging 3 parameters of said views : , DEFINER and SQL SECURITY :</p><ul><li>ALGORITHM allows us to tell how to execute the view. Here we will be choosing to make use of a temporary table to store the result of the view. While not the fastest, it has the good taste to make the view unwritable, on top of not having granted INSERT,UPDATE/DELETE privileges to the user,</li><li>DEFINER allows us to give “ownership” of the view to a specific account,</li><li>SQL SECURITY allows us to have the view executed with the DEFINER set of privileges instead of the INVOKER (aka the user) one.</li></ul><pre>CREATE VIEW `IT-O`.BoobyTable ALGORITHM=temptable <br />DEFINER=`locked.admin.account`@`localhost` <br />SQL SECURITY=DEFINER AS <br />SELECT necessary,columns,only <br />FROM RealSchema.RealTable <br />WHERE RestrictionClauses=values;</pre><p>Fourth thing, said user needs to manipulate the underlying table datas. We could theoritically allow the user to <a href="https://www.linkedin.com/redir/redirect?url=https%3A%2F%2Fmariadb%2Ecom%2Fkb%2Fen%2Finserting-and-updating-with-views%2F&amp;urlhash=228t&amp;trk=article-ssr-frontend-pulse_little-text-block">write through the view</a> . But the control over its action is then limited, hence i prefer creating ad hoc that will emulate the desired actions. With those objects we can leverage the same last 2 parameters( <a href="https://www.linkedin.com/redir/redirect?url=https%3A%2F%2Fmariadb%2Ecom%2Fkb%2Fen%2Fstored-procedures%2F&amp;urlhash=zaDr&amp;trk=article-ssr-frontend-pulse_little-text-block">stored routines</a> ) as with views to ensure a good isolation. <a href="https://www.linkedin.com/redir/redirect?url=https%3A%2F%2Fmariadb%2Ecom%2Fkb%2Fen%2Fstored-routine-privileges%2F%23definer-clause&amp;urlhash=nYug&amp;trk=article-ssr-frontend-pulse_little-text-block">DEFINER &amp; SQL SECURITY</a></p><pre>DELIMITER // CREATE OR REPLACE DEFINER=`locked.admin.account`@`localhost` <br />PROCEDURE `IT-O`.Action_BoobyTable (IN param_name type , OUT param_name type) <br />SQL SECURITY=DEFINER <br />BEGIN ACTIONS in SQL/PSM or PL/SQL <br />END// <br />DELIMITER ;</pre><p>Fifth step, we give the permissions to said user over the objects it needs.</p><pre>CREATE ROLE `IT-O`; <br />GRANT SELECT on `IT-O`.* to `IT-O`; <br />GRANT EXECUTE on `IT-O`.necesary_procs to `IT-O`; <br />GRANT `IT-O` to `IT-O`@`Coruscant`; <br />SET DEFAULT ROLE `IT-O` for `IT-O`@`Coruscant`;</pre><p>And now we have a user which acces is tightly controled and monitored even tho he has direct access to the database. Of course this could also be upgraded making him flow through on a dedicated service with , <a href="https://www.linkedin.com/redir/redirect?url=https%3A%2F%2Fmariadb%2Ecom%2Fkb%2Fen%2Fmariadb-maxscale-2402-maxscale-2402-query-log-all-filter%2F&amp;urlhash=WLkQ&amp;trk=article-ssr-frontend-pulse_little-text-block">general login</a> , <a href="https://www.linkedin.com/redir/redirect?url=https%3A%2F%2Fmariadb%2Ecom%2Fkb%2Fen%2Fmariadb-maxscale-2402-maxscale-2402-throttle%2F&amp;urlhash=l87J&amp;trk=article-ssr-frontend-pulse_little-text-block">query throttling</a> , and possibly also <a href="https://www.linkedin.com/redir/redirect?url=https%3A%2F%2Fmariadb%2Ecom%2Fkb%2Fen%2Fmariadb-maxscale-2402-maxscale-2402-maxrows%2F&amp;urlhash=wlll&amp;trk=article-ssr-frontend-pulse_little-text-block">resultset size limitation</a> . <a href="https://www.linkedin.com/redir/redirect?url=https%3A%2F%2Fmariadb%2Ecom%2Fkb%2Fen%2Fmariadb-maxscale-2402-maxscale-2402-comment-filter%2F%23example-1-inject-ip-address-of-the-connected-client-into-statements&amp;urlhash=YSCO&amp;trk=article-ssr-frontend-pulse_little-text-block">inserting connexion IP in the statement</a> <a href="https://www.linkedin.com/redir/redirect?url=https%3A%2F%2Fmariadb%2Ecom%2Fkb%2Fen%2Fmariadb-maxscale-2402-maxscale-2402-masking%2F&amp;urlhash=Nr7I&amp;trk=article-ssr-frontend-pulse_little-text-block">data masking</a></p><p>Of course, deployment of such an internal architecture can be partially automated since it is mostly linked to parametrizing.</p><p>Special thanks to <a href="https://uk.linkedin.com/in/federicorazzoli?trk=article-ssr-frontend-pulse_little-mention">Federico Razzoli </a>for mentionning the use of a locked admin account as DEFINER.</p><p><em>Originally published at </em><a href="https://www.linkedin.com/pulse/lets-go-physically-separated-sylvain-arbaudie-yzu3f/"><em>https://www.linkedin.com</em></a><em>.</em></p><img alt="" height="1" src="https://medium.com/_/stat?event=post.clientViewed&amp;referrerSource=full_rss&amp;postId=4053ae5be14c" width="1" />
