---
title: "MaxScale: much more than a reverse SQL proxy (part 2)
a nerdy yet comprehensive presentation"
date: Mon, 01 Sep 2025 14:52:36 GMT
lastUpdated: 2025-09-01T14:52:36.835Z
link: https://medium.com/@arbaudie.it/maxscale-much-more-than-a-reverse-sql-proxy-part-2-a-nerdy-yet-comprehensive-presentation-8dea99a096f4?source=rss-c779d007e7fe------2
---

<p>In my <a href="https://medium.com/@arbaudie.it/maxscale-much-more-than-a-reverse-sql-proxy-part-1-716d3361f4b4">previous story</a> i explained what <a href="https://mariadb.com/docs/maxscale/">Maxscale</a> is all about : a <a href="https://mariadb.com/docs/maxscale/maxscale-architecture/mariadb-maxscale-overview">powerful database proxy</a> developed by <a href="https://mariadb.com/">MariaDB plc</a> that sits between client applications and backend servers, enabling advanced features like load balancing, query routing, and automatic failover. I also detailed there the value proposition for businesses around the world.<br />Time to dive deeper into the nerdy bits !! (yay !)</p><p>At the heart of MaxScale is the concept of a service, which defines <em>what</em> clients connect to and <em>how</em> their requests are handled. A service acts as an abstraction layer that connects frontend clients to backend servers, enabling MaxScale to manage routing logic, load balancing, authentication, and more — making it the central piece that ties together MaxScale’s modular and flexible architecture as shown below.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*pAzTirt_S9jkezxNA-Mcgg.png" /><figcaption>excerpt of <a href="https://medium.com/u/fda02a04b6e9">Alejandro Duarte</a>’s excellent Maxscale crash course</figcaption></figure><p>Now let’s install it.</p><p>First step, setup your MariaDB repo using <a href="https://mariadb.com/docs/server/server-management/install-and-upgrade-mariadb/installing-mariadb/binary-packages/mariadb-package-repository-setup-and-usage">MariaDB plc setup script</a> :</p><pre>curl -sS https://downloads.mariadb.com/MariaDB/mariadb_repo_setup | sudo bash -s -- --maxscale-version=$VERSION</pre><p>For the <em>$VERSION</em> discussion, please refer to <a href="https://medium.com/@arbaudie.it/personal-opinion-maxscale-license-change-1a16baf93a9e">this story</a> of mine where i actively discuss about it.</p><p>Second step, install it.</p><pre>sudo $PACKAGEMANAGER install maxscale</pre><p>On Debian &amp; friends, use <em>apt-install</em>, on RHEL &amp; friends, use <em>yum</em> or <em>dnf</em>. <br />End of the installation process, let’s switch to configuration.</p><p>Maxscale default configuration file stays at <em>/etc/maxscale.cnf</em> . It is also posible to split that file into several <em>.cnf </em>files located into <em>/etc/maxscale.cnf.d/</em> . Those files would be automatically read at startup and processed in lexicographic order so their name is very important.<br />Wether you opt for a single file or splitting the configuration into several files, each of them is a classical <em>.cnf</em> file with sections separated by headers tag in between square brackets. <br />Each section represent an object and has a tag name. That tag name is used a an identifier and a label for linking objects together. Try and keep them short, descriptive and without weird characters.</p><p>Let’s inspect those sections one by one :</p><pre>[maxscale]</pre><p>This is the only section which has a mandatory name and no type. It is the place where everything global is setup. It should only exists once wether you have several <em>.cnf</em> files or not. This where you set the global parameters up such as : REST API exposition, maximum quantity of cpu threads, what and where to log and many others. You can find all about global settings <a href="https://mariadb.com/docs/maxscale/maxscale-management/installation-and-configuration/maxscale-configuration-guide#global-settings">here</a>.</p><p>Here’s what a minimal configuration could look like :</p><pre>[maxscale]<br />threads=auto<br />admin_host=0.0.0.0       // API exposed to all network adapters( not recommended in prod)<br />admin_port=8989          // API port restriction<br />admin_secure_gui=false   // no HTTPS (not recommended in prod)<br />logdir=/var/log/maxscale</pre><pre>[server]</pre><p>A <em>[server]</em> define the backend database servers (MariaDB/MySQL instances) that MaxScale is managing. Each server must have a unique name and can be configured individually for later use in the configuration file : routing, monitoring, and high availability. You can find all about servers <a href="https://mariadb.com/docs/maxscale/maxscale-management/installation-and-configuration/maxscale-configuration-guide#server-1">here</a>.</p><p>Here’s what a minimal configuration could look like :</p><pre>[server1]                  // name/tag/label of the object<br />type=server                // type of the object : here a backend server<br />address=192.168.1.10<br />port=3306<br />protocol=MariaDBBackend    // which protocol to use for connexion</pre><pre>[monitor]</pre><p>A <em>[monitor]</em> defines how MaxScale monitors the health and roles of your backend database servers based on the topology. Monitors are essential for automatic failover, read/write splitting, and maintaining high availability. You can find all about monitors <a href="https://mariadb.com/docs/maxscale/maxscale-management/installation-and-configuration/maxscale-configuration-guide#monitor-1">here</a>.</p><p>Here’s what a minimal configuration could look like :</p><pre>[MariaDB-Monitor]                // name/tag/label of the object<br />type=monitor                     // type of the object : a monitor<br />module=mariadbmon                // monitoring asynchronous replication<br />servers=server1,server2,server3  // list of server objects the monitor has to work with<br />user=maxscale_monitor            // user used for querying the status of the backend<br />password=monitor_password<br />monitor_interval=2000            // time interval betseen 2 checks in ms<br />auto_failover=true               // allowing for automatic failover<br />auto_rejoin=true                 // allowing for automatic rejoin of failed backends<br />replication_user=replication     // asynchronous replication user<br />replication_password=password<br />cooperative_monitoring_locks=majority_of_running // allows for several maxscale instances to coordinate failover operations</pre><pre>CREATE USER 'maxscale_monitor'@'$MAXSCALEIP' IDENTIFIED BY 'monitor_password';<br />GRANT REPLICATION CLIENT, PROCESS, SHOW DATABASES ON *.* TO 'maxscale_monitor'@'$MAXSCALEIP';<br />GRANT SELECT ON mysql.global_priv TO 'maxscale_monitor'@'$MAXSCALEIP';</pre><pre>[filter]</pre><p>A <em>[filter]</em> in MaxScale allow you to <strong>inspect, modify, block, or log queries</strong> as they pass through the proxy. Filters are optional but powerful for tailoring your maxscale workflow to your own needs.</p><p>There are numerous filters each with its own set of parameters. You can find all about filters <a href="https://mariadb.com/docs/maxscale/reference/maxscale-filters">here</a>.</p><p>Here’s what a simple logging filter configuration could look like :</p><pre>[Query-Log]          // name/tag/label of the object<br />type=filter          // type of the object : a filter<br />module=qlafilter     // which filter it actually is<br />options=/var/log/maxscale/queries.log</pre><pre>[service]</pre><p>A <em>[service]</em> in MaxScale defines how client connections are routed to backend servers. It combines a router module, a set of servers, and optional filters to control query flow, load balancing, and high availability.<br />There two main routers : readwritesplit, which natively splits reads and write and readconnroute, which natively load balances sessions across the servers. You can find all about the services <a href="https://mariadb.com/docs/maxscale/maxscale-management/installation-and-configuration/maxscale-configuration-guide#service-1">here</a>.</p><p>Here’s what a minimal configuration could look like :</p><pre>[Read-Write-Service]             // name/tag/label of the object<br />type=service                     // type of the object : a service<br />router=readwritesplit            // routing policy<br />servers=server1,server2,server3  // list of servers to route to<br />user=maxscale_user               // service user<br />password=maxscale_password<br />filter=Query-Log                 // which filters to apply</pre><pre>CREATE USER 'maxscale_user'@'$MAXSCALEIP' IDENTIFIED BY 'maxscale_password';<br />GRANT SELECT ON mysql.user TO 'maxscale_user'@'$MAXSCALEIP';<br />GRANT SELECT ON mysql.db TO 'maxscale_user'@'$MAXSCALEIP';<br />GRANT SELECT ON mysql.tables_priv TO 'maxscale_user'@'$MAXSCALEIP';<br />GRANT SELECT ON mysql.columns_priv TO 'maxscale_user'@'$MAXSCALEIP';<br />GRANT SELECT ON mysql.procs_priv TO 'maxscale_user'@'$MAXSCALEIP';<br />GRANT SELECT ON mysql.roles_mapping TO 'maxscale_user'@'$MAXSCALEIP';<br />GRANT SHOW DATABASES ON *.* TO 'maxscale_user'@'$MAXSCALEIP';</pre><pre>[listener]</pre><p>A <em>[listener]</em> defines how clients connect to MaxScale. It binds a service to a protocol, a network address and port or a socket, allowing MaxScale to accept and route client connections. You can find all about listeners <a href="https://mariadb.com/docs/maxscale/maxscale-management/installation-and-configuration/maxscale-configuration-guide#listener-1">here</a>.</p><p>Here’s what a minimal configuration could look like :</p><pre>[Read-Write-Listener]        // name/tag/label of the object<br />type=listener                // type of the object : a listener<br />service=Read-Write-Service<br />protocol=MariaDBClient<br />address=127.0.0.1<br />port=4006</pre><p>Configuration files are great — powerful, precise, and endlessly editable. But let’s face it: they tell you what and how, not what’s actually happening. That’s where MaxGUI comes in, giving you a clean GUI to monitor your databases and intervene in real time, whether for live changes or firefighting.</p><p>MariaDB MaxScale’s MaxGUI offers a very user-friendly interface for managing and monitoring your database infrastructure. With an intuitive dashboard, you can gain real-time insights into your system’s health and performance.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*lKCOyeM6eXkeIPJBDwHPvw.png" /><figcaption>excerpt from MariaDB plc documentation</figcaption></figure><p>Very similarly to <a href="https://github.com/openark/orchestrator">Openark’s orchestrator</a> the topology visualization feature allows you to graphically manage and understand your database architecture, making it easier to navigate complex setups.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*92HMADw5M2dTSP1o9rz9-g.png" /><figcaption>excerpt from MariaDB plc documentation</figcaption></figure><p>Additionally, MaxGUI enables you to visualize and edit your MaxScale configuration, providing clarity and simplifying adjustments.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*a3C3zDr8U5dR4MQ03Tvtlg.png" /><figcaption>excerpt from MariaDB plc documentation</figcaption></figure><p>For direct interaction with your databases, the integrated query editor allows you to execute SQL commands and view results within the interface and even create or edit Entity Relationship Diagrams, streamlining database management tasks.</p><figure><img alt="" src="https://cdn-images-1.medium.com/max/1024/1*E7rATi4cPt88J-Zk1bx8gg.png" /><figcaption>excerpt from MariaDB plc documentation</figcaption></figure><p>Doesnt it look clean af ? Well, there is <a href="https://mariadb.com/docs/maxscale/maxscale-archive/archive/mariadb-maxscale-23-02/mariadb-maxscale-23-02-tutorials/mariadb-maxscale-2302-using-maxgui-tutorial">more to it</a>. And there is more to come. I gotta say it loud : i love that, man !</p><p>MaxGUI is for seeing it all. But MaxCtrl is for doing it all — automation, speed and scripting your way out of chaos. With MaxCtrl you have full command-line control over MaxScale without much need for touching your mouse.<br />As very well described by <a href="https://severalnines.com/">SeveralNines</a> on <a href="https://severalnines.com/blog/maxscale-basic-management-using-maxctrl-mariadb-cluster/">this rather old but still pretty much relevant blog post</a>, you can dynamically configure Maxscale, you can inspect objects and backend server status.</p><pre># Check current servers<br />&gt; maxctrl list servers<br /><br />┌─────────┬─────────────┬──────┬─────────────┬─────────────────┐<br />│ Server  │ Address     │ Port │ Connections │ State           │<br />├─────────┼─────────────┼──────┼─────────────┼─────────────────┤<br />│ server1 │ 10.0.0.11   │ 3306 │ 120         │ Master, Running │<br />│ server2 │ 10.0.0.12   │ 3306 │  95         │ Slave, Running  │<br />│ server3 │ 10.0.0.13   │ 3306 │   0         │ Down            │<br />└─────────┴─────────────┴──────┴─────────────┴─────────────────┘</pre><p>One example of very modern features : you can dump a <a href="https://mariadb.com/docs/maxscale/mariadb-maxscale-tutorials/analyzing-maxctrl-create-report-output">report as JSON payload</a> giving you an overview of its content.</p><p>Here’s the kicker: whether you’re clicking through MaxGUI or hammering commands in MaxCtrl, you’re actually calling the same engine underneath — MaxScale REST API. Everything you see, everything you do, flows through that API, your visual dashboards and your command-line scripts aren’t separate worlds — they’re just two different ways of presenting the datas. The API itself is standards-based, exposing all objects and metrics as JSON over HTTP(S), so you can interact with it using litteraly anything from curl command-line calls to automation frameworks like Ansible or Terraform.</p><p>Through this API you can do everything: create and modify servers, services, monitors, filters, or listeners; inspect the current state of your cluster in real time, including connections, replication lag, and query flow.</p><pre># Check current services<br />&gt; curl -u admin:password http://127.0.0.1:8989/v1/services<br /><br />{<br />  &quot;data&quot;: [<br />    {<br />      &quot;id&quot;: &quot;rw-service&quot;,<br />      &quot;type&quot;: &quot;services&quot;,<br />      &quot;attributes&quot;: {<br />        &quot;router&quot;: &quot;readwritesplit&quot;,<br />        &quot;state&quot;: &quot;Running&quot;,<br />        &quot;router_diagnostics&quot;: {<br />          &quot;queries_routed&quot;: 102345,<br />          &quot;read_queries&quot;: 67432,<br />          &quot;write_queries&quot;: 34913<br />        }<br />      }<br />    }<br />  ],<br />  &quot;links&quot;: {<br />    &quot;self&quot;: &quot;http://localhost:8989/v1/services&quot;<br />  }<br />}</pre><pre># Add a new server to your cluster<br />&gt; curl -u admin:password -X POST http://localhost:8989/v1/servers \<br />  -H &quot;Content-Type: application/json&quot; \<br />  -d '{<br />    &quot;data&quot;: {<br />      &quot;id&quot;: &quot;server3&quot;,<br />      &quot;type&quot;: &quot;servers&quot;,<br />      &quot;attributes&quot;: {<br />        &quot;address&quot;: &quot;10.0.0.13&quot;,<br />        &quot;port&quot;: 3306,<br />        &quot;protocol&quot;: &quot;MariaDBBackend&quot;<br />      }<br />    }<br />  }'<br /><br />{<br />  &quot;data&quot;: {<br />    &quot;id&quot;: &quot;server3&quot;,<br />    &quot;type&quot;: &quot;servers&quot;,<br />    &quot;attributes&quot;: {<br />      &quot;address&quot;: &quot;10.0.0.13&quot;,<br />      &quot;port&quot;: 3306,<br />      &quot;protocol&quot;: &quot;MariaDBBackend&quot;,<br />      &quot;state&quot;: &quot;Down&quot;,<br />      &quot;version_string&quot;: null,<br />      &quot;statistics&quot;: {<br />        &quot;connections&quot;: 0,<br />        &quot;current_sessions&quot;: 0,<br />        &quot;total_sessions&quot;: 0<br />      }<br />    }<br />  },<br />  &quot;links&quot;: {<br />    &quot;self&quot;: &quot;http://localhost:8989/v1/servers/server3&quot;<br />  }<br />}</pre><p>Authentication and role-based access control secure it, and TLS support ensures that sensitive operations are protected. The API is open and integrates easily with monitoring systems such as Prometheus or with CI/CD pipelines.</p><p>In short, the REST API makes MaxScale not just configurable, but programmable — a platform you can plug into your automation, your workflows, and your monitoring stack as a first-class citizen.</p><p>As you can see, configuring MaxScale is rather straightforward. It combines logical, easy-to-understand setups with both fixed and dynamic ways, letting you tune the system from the get-go or adapt on the fly. For visibility, MaxScale offers an intuitive visualization tools, so you can see what’s happening in real time. It also provides a powerful command-line interface for automation, and all that is based upon a robust API that makes integration with other tools seamless. In short, MaxScale gives you full control without much complexity.</p><p>Need a hand deploying MaxScale? Whether it’s a quick review, a hands-on workshop to shape the future of your architecture, or a training session to level up your data team, <a href="https://arbaudie.it">let’s connect</a> and figure out the best way forward.</p><img alt="" height="1" src="https://medium.com/_/stat?event=post.clientViewed&amp;referrerSource=full_rss&amp;postId=8dea99a096f4" width="1" />
